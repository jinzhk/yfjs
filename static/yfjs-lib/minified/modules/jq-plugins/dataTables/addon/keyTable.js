var KeyTable;!function(a,b,c){var d=function(d,e){"use strict";return KeyTable=function(e){function f(a){return function(b,c,d){if(null!==b&&"number"!=typeof b||null!==c&&"number"!=typeof c||"function"!=typeof d)if("object"==typeof b&&"function"==typeof c){var e=s(b);h(a,e[0],e[1],c)}else alert("Unhandable event type was added: x"+b+"  y:"+c+"  z:"+d);else h(a,b,c,d)}}function g(a){return function(b,c,d){if(null!==b&&"number"!=typeof arguments[0]||null!==c&&"number"!=typeof arguments[1])if("object"==typeof arguments[0]){var e=s(b);"function"==typeof arguments[1]?i(a,e[0],e[1],c):i(a,e[0],e[1])}else alert("Unhandable event type was removed: x"+b+"  y:"+c+"  z:"+d);else"function"==typeof arguments[2]?i(a,b,c,d):i(a,b,c)}}function h(a,b,c,d){H[a].push({x:b,y:c,fn:d})}function i(a,b,c,d){for(var e=0,f=0,g=H[a].length;f<g-e;f++)if(void 0!==d)H[a][f-e].x==b&&H[a][f-e].y==c&&H[a][f-e].fn==d&&(H[a].splice(f-e,1),e++);else if(H[a][f-e].x==b&&H[a][f-e].y==c)return H[a].splice(f,1),1;return e}function j(a,b,c){for(var d=0,e=H[a],f=0;f<e.length;f++)(e[f].x==b&&e[f].y==c||null===e[f].x&&e[f].y==c||e[f].x==b&&null===e[f].y||null===e[f].x&&null===e[f].y)&&(e[f].fn(r(b,c),b,c),d++);return d}function k(c,e){if(B!=c){void 0===e&&(e=!0),null!==B&&m(B),d(c).addClass(F),d(c).parent().addClass(F);var f;if(I){f=I;for(var g=w(c)[1],h=G;g>=f.fnDisplayEnd();)f._iDisplayLength>=0?f._iDisplayStart+f._iDisplayLength<f.fnRecordsDisplay()&&(f._iDisplayStart+=f._iDisplayLength):f._iDisplayStart=0,I.oApi._fnCalculateEnd(f);for(;g<f._iDisplayStart;)f._iDisplayStart=f._iDisplayLength>=0?f._iDisplayStart-f._iDisplayLength:0,f._iDisplayStart<0&&(f._iDisplayStart=0),I.oApi._fnCalculateEnd(f);I.oApi._fnDraw(f),G=h}var i=s(c);B=c,C=i[0],D=i[1];var k,l,n,o,q,r,x;if(e&&(k=d(a).height(),l=d(a).width(),n=d(b).scrollTop(),o=d(b).scrollLeft(),q=c.offsetHeight,r=c.offsetWidth,x=v(c),!I||void 0===f.oScroll||""===f.oScroll.sX&&""===f.oScroll.sY||(x[1]-=d(f.nTable.parentNode).scrollTop(),x[0]-=d(f.nTable.parentNode).scrollLeft()),x[1]+q>n+k?t(x[1]+q-k):x[1]<n&&t(x[1]),x[0]+r>o+l?u(x[0]+r-l):x[0]<o&&u(x[0])),I&&void 0!==f.oScroll&&(""!==f.oScroll.sX||""!==f.oScroll.sY)){var y=f.nTable.parentNode;k=y.clientHeight,l=y.clientWidth,n=y.scrollTop,o=y.scrollLeft,q=c.offsetHeight,r=c.offsetWidth,c.offsetTop+q>k+n?y.scrollTop=c.offsetTop+q-k:c.offsetTop<n&&(y.scrollTop=c.offsetTop),c.offsetLeft+r>l+o?y.scrollLeft=c.offsetLeft+r-l:c.offsetLeft<o&&(y.scrollLeft=c.offsetLeft)}p(),j("focus",C,D)}}function l(){m(B),C=null,D=null,B=null,q()}function m(a){d(a).removeClass(F),d(a).parent().removeClass(F),j("blur",C,D)}function n(a){for(var b=this;"TD"!=b.nodeName;)b=b.parentNode;k(b),p()}function o(a){if(E.block||!G)return!0;if(a.metaKey||a.altKey||a.ctrlKey)return!0;var b,c,d,e=A.getElementsByTagName("tr")[0].getElementsByTagName("td").length;if(I){d=I.aiDisplay.length;var f=w(B);if(null===f)return;C=f[0],D=f[1]}else d=A.getElementsByTagName("tr").length;var g=9==a.keyCode&&a.shiftKey?-1:a.keyCode;switch(g){case 13:return a.preventDefault(),a.stopPropagation(),j("action",C,D),!0;case 27:if(!j("esc",C,D))return void l();b=C,c=D;break;case-1:case 37:if(C>0)b=C-1,c=D;else{if(!(D>0))return!(-1!=g||!y)&&(J=!0,z.focus(),setTimeout(function(){J=!1},0),G=!1,l(),!0);b=e-1,c=D-1}break;case 38:if(!(D>0))return!1;b=C,c=D-1;break;case 36:b=C,c=0;break;case 33:b=C,c=D-10,c<0&&(c=0);break;case 9:case 39:if(C<e-1)b=C+1,c=D;else{if(!(D<d-1))return!(9!=g||!y)&&(J=!0,z.focus(),setTimeout(function(){J=!1},0),G=!1,l(),!0);b=0,c=D+1}break;case 40:if(!(D<d-1))return!1;b=C,c=D+1;break;case 35:b=C,c=d-1;break;case 34:b=C,c=D+10,c>d-1&&(c=d-1);break;default:return!0}return k(r(b,c)),!1}function p(){G||(G=!0)}function q(){G=!1}function r(a,b){return I?void 0!==I.aoData[I.aiDisplay[b]]?I.aoData[I.aiDisplay[b]].nTr.getElementsByTagName("td")[a]:null:d("tr:eq("+b+")>td:eq("+a+")",A)[0]}function s(a){return I?[d("td",a.parentNode).index(a),d("tr",a.parentNode.parentNode).index(a.parentNode)+I._iDisplayStart]:[d("td",a.parentNode).index(a),d("tr",a.parentNode.parentNode).index(a.parentNode)]}function t(a){b.documentElement.scrollTop=a,b.body.scrollTop=a}function u(a){b.documentElement.scrollLeft=a,b.body.scrollLeft=a}function v(a){var b=0,c=0;if(a.offsetParent)for(b=a.offsetLeft,c=a.offsetTop,a=a.offsetParent;a;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return[b,c]}function w(a){for(var b=0,c=I.aiDisplay.length;b<c;b++)for(var d=I.aoData[I.aiDisplay[b]].nTr,e=d.getElementsByTagName("td"),f=0,g=e.length;f<g;f++)if(e[f]==a)return[f,b];return null}function x(a,c,e,f){if(E=f,void 0===e&&(e={}),void 0===e.focus&&(e.focus=[0,0]),e.table=a,d(e.table).addClass("KeyTable"),void 0!==e.focusClass&&(F=e.focusClass),void 0!==c&&(I=c),void 0===e.initScroll&&(e.initScroll=!0),void 0===e.form&&(e.form=!1),y=e.form,A=e.table.getElementsByTagName("tbody")[0],y){var g=b.createElement("div");z=b.createElement("input"),g.style.height="1px",g.style.width="0px",g.style.overflow="hidden",void 0!==e.tabIndex&&(z.tabIndex=e.tabIndex),g.appendChild(z),e.table.parentNode.insertBefore(g,e.table.nextSibling),d(z).focus(function(){J||(G=!0,J=!1,void 0!==e.focus.nodeName?k(e.focus,e.initScroll):k(r(e.focus[0],e.focus[1]),e.initScroll),setTimeout(function(){z.blur()},0))}),G=!1}else void 0!==e.focus.nodeName?k(e.focus,e.initScroll):k(r(e.focus[0],e.focus[1]),e.initScroll),p();d(b).bind("keydown",o),I?d(I.nTable).on("click","td",n):d(A).on("click","td",n),d(b).click(function(a){for(var b=a.target,c=!1;b;){if(b==e.table){c=!0;break}b=b.parentNode}c||l()})}this.block=!1,this.event={remove:{}},this.fnGetCurrentPosition=function(){return[C,D]},this.fnGetCurrentData=function(){return B.innerHTML},this.fnGetCurrentTD=function(){return B},this.fnSetPosition=function(a,b){k("object"==typeof a&&a.nodeName?a:r(a,b))},this.fnBlur=function(){l()};var y,z,A=null,B=null,C=null,D=null,E=null,F="focus",G=!1,H={action:[],esc:[],focus:[],blur:[]},I=null,J=!1;for(var K in H)K&&(this.event[K]=f(K),this.event.remove[K]=g(K));var L,M;e===c?(L=d("table.KeyTable")[0],M=null):d.isPlainObject(e)?(L=e.table,M=e.datatable):(M=new d.fn.dataTable.Api(e).settings()[0],L=M.nTable),x(L,M,e,this)},KeyTable.version="1.2.1",d.fn.dataTable.KeyTable=KeyTable,d.fn.DataTable.KeyTable=KeyTable,KeyTable};"function"==typeof define&&define.amd?define(["jquery","jq/dataTables"],d):"object"==typeof exports?d(require("jquery"),require("jq/dataTables")):jQuery&&!jQuery.fn.dataTable.KeyTable&&d(jQuery,jQuery.fn.dataTable)}(window,document);