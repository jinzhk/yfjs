!function(a,b,c){var d=function(d,e){"use strict";var f=function(a,c){if(!this instanceof f)return void alert("Scroller warning: Scroller must be initialised with the 'new' keyword.");void 0===c&&(c={}),this.s={dt:a,tableTop:0,tableBottom:0,redrawTop:0,redrawBottom:0,autoHeight:!0,viewportRows:0,stateTO:null,drawTO:null,heights:{jump:null,page:null,virtual:null,scroll:null,row:null,viewport:null},topRowFloat:0,scrollDrawDiff:null,loaderVisible:!1},this.s=d.extend(this.s,f.oDefaults,c),this.s.heights.row=this.s.rowHeight,this.dom={force:b.createElement("div"),scroller:null,table:null,loader:null},this.s.dt.oScroller=this,this._fnConstruct()};if(f.prototype={fnRowToPixels:function(a,b,d){var e;if(d)e=this._domain("virtualToPhysical",a*this.s.heights.row);else{var f=a-this.s.baseRowTop;e=this.s.baseScrollTop+f*this.s.heights.row}return b||b===c?parseInt(e,10):e},fnPixelsToRow:function(a,b,d){var e=a-this.s.baseScrollTop,f=d?this._domain("physicalToVirtual",a)/this.s.heights.row:e/this.s.heights.row+this.s.baseRowTop;return b||b===c?parseInt(f,10):f},fnScrollToRow:function(a,b){var c=this,e=!1,f=this.fnRowToPixels(a),g=(this.s.displayBuffer-1)/2*this.s.viewportRows,h=a-g;h<0&&(h=0),(f>this.s.redrawBottom||f<this.s.redrawTop)&&this.s.dt._iDisplayStart!==h&&(e=!0,f=this.fnRowToPixels(a,!1,!0)),void 0===b||b?(this.s.ani=e,d(this.dom.scroller).animate({scrollTop:f},function(){setTimeout(function(){c.s.ani=!1},25)})):d(this.dom.scroller).scrollTop(f)},fnMeasure:function(a){this.s.autoHeight&&this._fnCalcRowHeight();var b=this.s.heights;b.viewport=d(this.dom.scroller).height(),this.s.viewportRows=parseInt(b.viewport/b.row,10)+1,this.s.dt._iDisplayLength=this.s.viewportRows*this.s.displayBuffer,(a===c||a)&&this.s.dt.oInstance.fnDraw()},_fnConstruct:function(){var b=this;if(!this.s.dt.oFeatures.bPaginate)return void this.s.dt.oApi._fnLog(this.s.dt,0,"Pagination must be enabled for Scroller");this.dom.force.style.position="absolute",this.dom.force.style.top="0px",this.dom.force.style.left="0px",this.dom.force.style.width="1px",this.dom.scroller=d("div."+this.s.dt.oClasses.sScrollBody,this.s.dt.nTableWrapper)[0],this.dom.scroller.appendChild(this.dom.force),this.dom.scroller.style.position="relative",this.dom.table=d(">table",this.dom.scroller)[0],this.dom.table.style.position="absolute",this.dom.table.style.top="0px",this.dom.table.style.left="0px",d(this.s.dt.nTableWrapper).addClass("DTS"),this.s.loadingIndicator&&(this.dom.loader=d('<div class="DTS_Loading">'+this.s.dt.oLanguage.sLoadingRecords+"</div>").css("display","none"),d(this.dom.scroller.parentNode).css("position","relative").append(this.dom.loader)),this.s.heights.row&&"auto"!=this.s.heights.row&&(this.s.autoHeight=!1),this.fnMeasure(!1),this.s.ingnoreScroll=!0,this.s.stateSaveThrottle=this.s.dt.oApi._fnThrottle(function(){b.s.dt.oApi._fnSaveState(b.s.dt)},500),d(this.dom.scroller).on("scroll.DTS",function(a){b._fnScroll.call(b)}),d(this.dom.scroller).on("touchstart.DTS",function(){b._fnScroll.call(b)}),this.s.dt.aoDrawCallback.push({fn:function(){b.s.dt.bInitialised&&b._fnDrawCallback.call(b)},sName:"Scroller"}),d(a).on("resize.DTS",function(){b.fnMeasure(!1),b._fnInfo()});var c=!0;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(a,d){c&&b.s.dt.oLoadedState?(d.iScroller=b.s.dt.oLoadedState.iScroller,d.iScrollerTopRow=b.s.dt.oLoadedState.iScrollerTopRow,c=!1):(d.iScroller=b.dom.scroller.scrollTop,d.iScrollerTopRow=b.s.topRowFloat)},"Scroller_State"),this.s.dt.oLoadedState&&(this.s.topRowFloat=this.s.dt.oLoadedState.iScrollerTopRow||0),this.s.dt.aoDestroyCallback.push({sName:"Scroller",fn:function(){d(a).off("resize.DTS"),d(b.dom.scroller).off("touchstart.DTS scroll.DTS"),d(b.s.dt.nTableWrapper).removeClass("DTS"),d("div.DTS_Loading",b.dom.scroller.parentNode).remove(),b.dom.table.style.position="",b.dom.table.style.top="",b.dom.table.style.left=""}})},_fnScroll:function(){var a,b=this,c=this.s.heights,e=this.dom.scroller.scrollTop;if(!this.s.skip&&!this.s.ingnoreScroll){if(this.s.dt.bFiltered||this.s.dt.bSorted)return void(this.s.lastScrollTop=0);if(this._fnInfo(),clearTimeout(this.s.stateTO),this.s.stateTO=setTimeout(function(){b.s.dt.oApi._fnSaveState(b.s.dt)},250),e<this.s.redrawTop||e>this.s.redrawBottom){var f=Math.ceil((this.s.displayBuffer-1)/2*this.s.viewportRows);if(Math.abs(e-this.s.lastScrollTop)>c.viewport||this.s.ani?(a=parseInt(this._domain("physicalToVirtual",e)/c.row,10)-f,this.s.topRowFloat=this._domain("physicalToVirtual",e)/c.row):(a=this.fnPixelsToRow(e)-f,this.s.topRowFloat=this.fnPixelsToRow(e,!1)),a<=0?a=0:a+this.s.dt._iDisplayLength>this.s.dt.fnRecordsDisplay()?(a=this.s.dt.fnRecordsDisplay()-this.s.dt._iDisplayLength)<0&&(a=0):a%2!=0&&a++,a!=this.s.dt._iDisplayStart){this.s.tableTop=d(this.s.dt.nTable).offset().top,this.s.tableBottom=d(this.s.dt.nTable).height()+this.s.tableTop;var g=function(){null===b.s.scrollDrawReq&&(b.s.scrollDrawReq=e),b.s.dt._iDisplayStart=a,b.s.dt.oApi._fnCalculateEnd&&b.s.dt.oApi._fnCalculateEnd(b.s.dt),b.s.dt.oApi._fnDraw(b.s.dt)};this.s.dt.oFeatures.bServerSide?(clearTimeout(this.s.drawTO),this.s.drawTO=setTimeout(g,this.s.serverWait)):g(),this.dom.loader&&!this.s.loaderVisible&&(this.dom.loader.css("display","block"),this.s.loaderVisible=!0)}}this.s.lastScrollTop=e,this.s.stateSaveThrottle()}},_domain:function(a,b){var c,d=this.s.heights;if(d.virtual===d.scroll){if(c=(d.virtual-d.viewport)/(d.scroll-d.viewport),"virtualToPhysical"===a)return b/c;if("physicalToVirtual"===a)return b*c}var e=(d.scroll-d.viewport)/2,f=(d.virtual-d.viewport)/2;return c=f/(e*e),"virtualToPhysical"===a?b<f?Math.pow(b/c,.5):(b=2*f-b,b<0?d.scroll:2*e-Math.pow(b/c,.5)):"physicalToVirtual"===a?b<e?b*b*c:(b=2*e-b,b<0?d.virtual:2*f-b*b*c):void 0},_fnDrawCallback:function(){var a=this,b=this.s.heights,c=this.dom.scroller.scrollTop,e=(b.viewport,d(this.s.dt.nTable).height()),f=this.s.dt._iDisplayStart,g=this.s.dt._iDisplayLength,h=this.s.dt.fnRecordsDisplay();this.s.skip=!0,this._fnScrollForce(),c=0===f?this.s.topRowFloat*b.row:f+g>=h?b.scroll-(h-this.s.topRowFloat)*b.row:this._domain("virtualToPhysical",this.s.topRowFloat*b.row),this.dom.scroller.scrollTop=c,this.s.baseScrollTop=c,this.s.baseRowTop=this.s.topRowFloat;var i=c-(this.s.topRowFloat-f)*b.row;0===f?i=0:f+g>=h&&(i=b.scroll-e),this.dom.table.style.top=i+"px",this.s.tableTop=i,this.s.tableBottom=e+this.s.tableTop;var j=(c-this.s.tableTop)*this.s.boundaryScale;if(this.s.redrawTop=c-j,this.s.redrawBottom=c+j,this.s.skip=!1,this.s.dt.oFeatures.bStateSave&&null!==this.s.dt.oLoadedState&&void 0!==this.s.dt.oLoadedState.iScroller){var k=!(!this.s.dt.sAjaxSource&&!a.s.dt.ajax||this.s.dt.oFeatures.bServerSide);(k&&2==this.s.dt.iDraw||!k&&1==this.s.dt.iDraw)&&setTimeout(function(){d(a.dom.scroller).scrollTop(a.s.dt.oLoadedState.iScroller),a.s.redrawTop=a.s.dt.oLoadedState.iScroller-b.viewport/2,setTimeout(function(){a.s.ingnoreScroll=!1},0)},0)}else a.s.ingnoreScroll=!1;setTimeout(function(){a._fnInfo.call(a)},0),this.dom.loader&&this.s.loaderVisible&&(this.dom.loader.css("display","none"),this.s.loaderVisible=!1)},_fnScrollForce:function(){var a=this.s.heights,b=1e6;a.virtual=a.row*this.s.dt.fnRecordsDisplay(),a.scroll=a.virtual,a.scroll>b&&(a.scroll=b),this.dom.force.style.height=a.scroll+"px"},_fnCalcRowHeight:function(){var a=this.s.dt,b=a.nTable,c=b.cloneNode(!1),e=d("<tbody/>").appendTo(c),f=d('<div class="'+a.oClasses.sWrapper+' DTS"><div class="'+a.oClasses.sScrollWrapper+'"><div class="'+a.oClasses.sScrollBody+'"></div></div></div>');for(d("tbody tr:lt(4)",b).clone().appendTo(e);d("tr",e).length<3;)e.append("<tr><td>&nbsp;</td></tr>");d("div."+a.oClasses.sScrollBody,f).append(c);var g;a._bInitComplete?g=b.parentNode:(this.s.dt.nHolding||(this.s.dt.nHolding=d("<div></div>").insertBefore(this.s.dt.nTable)),g=this.s.dt.nHolding),f.appendTo(g),this.s.heights.row=d("tr",e).eq(1).outerHeight(),f.remove()},_fnInfo:function(){if(this.s.dt.oFeatures.bInfo){var a,b=this.s.dt,c=b.oLanguage,e=this.dom.scroller.scrollTop,f=Math.floor(this.fnPixelsToRow(e,!1,this.s.ani)+1),g=b.fnRecordsTotal(),h=b.fnRecordsDisplay(),i=Math.ceil(this.fnPixelsToRow(e+this.s.heights.viewport,!1,this.s.ani)),j=h<i?h:i,k=b.fnFormatNumber(f),l=b.fnFormatNumber(j),m=b.fnFormatNumber(g),n=b.fnFormatNumber(h);a=0===b.fnRecordsDisplay()&&b.fnRecordsDisplay()==b.fnRecordsTotal()?c.sInfoEmpty+c.sInfoPostFix:0===b.fnRecordsDisplay()?c.sInfoEmpty+" "+c.sInfoFiltered.replace("_MAX_",m)+c.sInfoPostFix:b.fnRecordsDisplay()==b.fnRecordsTotal()?c.sInfo.replace("_START_",k).replace("_END_",l).replace("_MAX_",m).replace("_TOTAL_",n)+c.sInfoPostFix:c.sInfo.replace("_START_",k).replace("_END_",l).replace("_MAX_",m).replace("_TOTAL_",n)+" "+c.sInfoFiltered.replace("_MAX_",b.fnFormatNumber(b.fnRecordsTotal()))+c.sInfoPostFix;var o=c.fnInfoCallback;o&&(a=o.call(b.oInstance,b,f,j,g,h,a));var p=b.aanFeatures.i;if(void 0!==p)for(var q=0,r=p.length;q<r;q++)d(p[q]).html(a)}}},f.defaults={trace:!1,rowHeight:"auto",serverWait:200,displayBuffer:9,boundaryScale:.5,loadingIndicator:!1},f.oDefaults=f.defaults,f.version="1.2.2","function"==typeof d.fn.dataTable&&"function"==typeof d.fn.dataTableExt.fnVersionCheck&&d.fn.dataTableExt.fnVersionCheck("1.9.0")?d.fn.dataTableExt.aoFeatures.push({fnInit:function(a){var b=a.oInit,c=b.scroller||b.oScroller||{};return new f(a,c).dom.wrapper},cFeature:"S",sFeature:"Scroller"}):alert("Warning: Scroller requires DataTables 1.9.0 or greater - www.datatables.net/download"),d.fn.dataTable.Scroller=f,d.fn.DataTable.Scroller=f,d.fn.dataTable.Api){var g=d.fn.dataTable.Api;g.register("scroller()",function(){return this}),g.register("scroller().rowToPixels()",function(a,b,c){var d=this.context;if(d.length&&d[0].oScroller)return d[0].oScroller.fnRowToPixels(a,b,c)}),g.register("scroller().pixelsToRow()",function(a,b,c){var d=this.context;if(d.length&&d[0].oScroller)return d[0].oScroller.fnPixelsToRow(a,b,c)}),g.register("scroller().scrollToRow()",function(a,b){return this.iterator("table",function(c){c.oScroller&&c.oScroller.fnScrollToRow(a,b)}),this}),g.register("scroller().measure()",function(a){return this.iterator("table",function(b){b.oScroller&&b.oScroller.fnMeasure(a)}),this})}return f};"function"==typeof define&&define.amd?define(["jquery","jq/dataTables"],d):"object"==typeof exports?d(require("jquery"),require("jq/dataTables")):jQuery&&!jQuery.fn.dataTable.Scroller&&d(jQuery,jQuery.fn.dataTable)}(window,document);