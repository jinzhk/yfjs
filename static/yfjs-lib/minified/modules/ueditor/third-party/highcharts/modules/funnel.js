!function(a){"use strict";var b=a.getOptions(),c=b.plotOptions,d=a.seriesTypes,e=a.merge,f=function(){},g=a.each;c.funnel=e(c.pie,{center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",dataLabels:{connectorWidth:1,connectorColor:"#606060"},size:!0,states:{select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}}}),d.funnel=a.extendClass(d.pie,{type:"funnel",animate:f,translate:function(){var a,b,c,d,e,h,i,j,k,l,m,n=function(a,b){return/%$/.test(a)?b*parseInt(a,10)/100:parseInt(a,10)},o=0,p=this,q=p.chart,r=q.plotWidth,s=q.plotHeight,t=0,u=p.options,v=u.center,w=n(v[0],r),x=n(v[0],s),y=n(u.width,r),z=n(u.height,s),A=n(u.neckWidth,r),B=n(u.neckHeight,s),C=z-B,D=p.data,E="left"===u.dataLabels.position?1:0;p.getWidthAt=b=function(a){return a>z-B||z===B?A:A+(z-B-a)/(z-B)*(y-A)},p.getX=function(a,c){return w+(c?-1:1)*(b(a)/2+u.dataLabels.distance)},p.center=[w,x,z],p.centerX=w,g(D,function(a){o+=a.y}),g(D,function(g){m=null,d=o?g.y/o:0,h=x-z/2+t*z,k=h+d*z,a=b(h),e=w-a/2,i=e+a,a=b(k),j=w-a/2,l=j+a,h>C?(e=j=w-A/2,i=l=w+A/2):k>C&&(m=k,a=b(C),j=w-a/2,l=j+a,k=C),c=["M",e,h,"L",i,h,l,k],m&&c.push(l,m,j,m),c.push(j,k,"Z"),g.shapeType="path",g.shapeArgs={d:c},g.percentage=100*d,g.plotX=w,g.plotY=(h+(m||k))/2,g.tooltipPos=[w,g.plotY],g.slice=f,g.half=E,t+=d}),p.setTooltipPoints()},drawPoints:function(){var a=this,b=a.options,c=a.chart,d=c.renderer;g(a.data,function(c){var e=c.graphic,f=c.shapeArgs;e?e.animate(f):c.graphic=d.path(f).attr({fill:c.color,stroke:b.borderColor,"stroke-width":b.borderWidth}).add(a.group)})},sortByAngle:f,drawDataLabels:function(){var a,b,c,e,f,g=this.data,h=this.options.dataLabels.distance,i=g.length;for(this.center[2]-=2*h;i--;)c=g[i],a=c.half,b=a?1:-1,f=c.plotY,e=this.getX(f,a),c.labelPos=[0,f,e+(h-5)*b,f,e+h*b,f,a?"right":"left",0];d.pie.prototype.drawDataLabels.call(this)}})}(Highcharts);